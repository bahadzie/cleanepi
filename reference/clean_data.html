<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="this function is used to clean up messy data frames. This
include the cleaning of column names, detecting and removing of
duplicates, empty records and columns, constant columns, replacing missing
values by NA, converting character columns into Date when they contain a
certain number of Date values, detecting subject IDs with wrong format"><title>Clean data — clean_data • cleanepi</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Clean data — clean_data"><meta property="og:description" content="this function is used to clean up messy data frames. This
include the cleaning of column names, detecting and removing of
duplicates, empty records and columns, constant columns, replacing missing
values by NA, converting character columns into Date when they contain a
certain number of Date values, detecting subject IDs with wrong format"><meta property="og:image" content="https://epiverse-trace.github.io/cleanepi/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-XZ471458FQ"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XZ471458FQ');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">cleanepi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/cleanepi.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Clean data</h1>
      
      <div class="d-none name"><code>clean_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>this function is used to clean up messy data frames. This
include the cleaning of column names, detecting and removing of
duplicates, empty records and columns, constant columns, replacing missing
values by NA, converting character columns into Date when they contain a
certain number of Date values, detecting subject IDs with wrong format</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">clean_data</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>remove_duplicates <span class="op">=</span> <span class="cn">FALSE</span>, target_columns <span class="op">=</span> <span class="cn">NULL</span>, replace_missing <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    na_comes_as <span class="op">=</span> <span class="cn">NULL</span>, check_timeframe <span class="op">=</span> <span class="cn">FALSE</span>, timeframe <span class="op">=</span> <span class="cn">NULL</span>, error_tolerance <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>    subject_id_col_name <span class="op">=</span> <span class="cn">NULL</span>, subject_id_format <span class="op">=</span> <span class="cn">NULL</span>, prefix <span class="op">=</span> <span class="st">"PS"</span>, suffix <span class="op">=</span> <span class="st">"P2"</span>,</span>
<span>    range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">100L</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>the input data frame</p></dd>


<dt>params</dt>
<dd><p>a list of parameters that define what cleaning operations will
be applied on the input data. Possible parameters are:</p><ol><li><p><code>remove_duplicates</code>: whether to remove duplicated records or not. If
<code>TRUE</code>, the <code>remove</code> argument of the <code>remove_duplicate()</code> function
will automatically be set to <code>-1</code> i.e. to keep only the first instance
of duplicated rows.
When the user only needs to detect duplicated rows in the dataset, use
the <code><a href="find_duplicates.html">find_duplicates()</a></code> function.</p></li>
<li><p><code>target_columns</code>: a vector of columns names or indices to consider
when looking for duplicates. When the input data is a <code>linelist</code>
object, this parameter can be set to <code>tags</code> if you wish to look for
duplicates across the tagged variables only. Only used when
<code>remove_duplicates=TRUE</code></p></li>
<li><p><code>replace_missing</code>: whether to replace the missing value characters
with NA or not. default is FALSE</p></li>
<li><p><code>na_comes_as</code>: the characters that represent the missing values in
the data frame. Only used when <code>replace_missing=TRUE</code></p></li>
<li><p><code>check_timeframe</code>: a logical to determine whether to check if the
dates fall under the given time frame of not. default: FALSE</p></li>
<li><p><code>timeframe</code>: a vector of 2 elements of Date class that specifies the
first and last date. If provided, all Dates in the data frame must be
within this range or set to NA during the cleaning.</p></li>
<li><p><code>error_tolerance</code>: a number between 0 and 1 indicating the proportion
of entries which cannot be identified as dates to be tolerated; if
this proportion is exceeded, the original vector is returned, and a
message is issued; defaults to 0.1 (10 percent)</p></li>
<li><p><code>subject_id_col_name</code>: the name of the column in the data frame with
the subject IDs</p></li>
<li><p><code>subject_id_format</code>: the expected subject format</p></li>
<li><p><code>prefix</code>: the prefix used in the subject IDs</p></li>
<li><p><code>suffix</code>: the prefix used in the subject IDs</p></li>
<li><p><code>range</code>: a vector with the range of numbers in the sample IDs</p></li>
</ol></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>a list of the following 2 elements:</p><ol><li><p><code>data</code>: the cleaned data frame according to the user-specified
parameters</p></li>
<li><p><code>report</code>: a list with the information about the effects of the
the cleaning steps</p></li>
</ol></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>If <code>check_timeframe = TRUE</code> and <code>timeframe = NULL</code>, the timeframe will be
today's date and the same date 50 years before.</p>
<p>in <code>clean_data()</code>, duplicated rows will be identified across the
user-specified or all columns. Once detected, all occurrences of the
duplicated rows will be removed except the first. If you only need to find
and remove specific duplicates, use the <code><a href="find_duplicates.html">find_duplicates()</a></code> then
<code><a href="remove_duplicates.html">remove_duplicates()</a></code> functions.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">cleaned_data</span> <span class="op">&lt;-</span> <span class="fu">clean_data</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"test_df.RDS"</span>,</span></span>
<span class="r-in"><span>                               package <span class="op">=</span> <span class="st">"cleanepi"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    remove_duplicates   <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>    target_columns      <span class="op">=</span> <span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>    replace_missing     <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>    na_comes_as         <span class="op">=</span> <span class="st">"-99"</span>,</span></span>
<span class="r-in"><span>    check_timeframe     <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>    timeframe           <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1973-05-29"</span>, <span class="st">"2023-05-29"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    error_tolerance     <span class="op">=</span> <span class="fl">0.5</span>,</span></span>
<span class="r-in"><span>    subject_id_col_name <span class="op">=</span> <span class="st">"study_id"</span>,</span></span>
<span class="r-in"><span>    subject_id_format   <span class="op">=</span> <span class="st">"PS000P2"</span>,</span></span>
<span class="r-in"><span>    prefix              <span class="op">=</span> <span class="st">"PS"</span>,</span></span>
<span class="r-in"><span>    suffix              <span class="op">=</span> <span class="st">"P2"</span>,</span></span>
<span class="r-in"><span>    range               <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">100</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> cleaning column names</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> replacing missing values with NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> removing empty rows and columns</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> removing constant columns</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> standardising date columns</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> checking for subject IDs uniqueness</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> removing duplicated rows</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> checking subject IDs format</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Karim Mané.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

