<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="cleanepi">
<title>cleanepi • cleanepi</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="cleanepi">
<meta property="og:description" content="cleanepi">
<meta property="og:image" content="https://epiverse-trace.github.io/cleanepi/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-XZ471458FQ"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XZ471458FQ');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-dark"><div class="container">
    
    <a href="https://epiverse-trace.github.io/" class="external-link"><img src="../logo_white.svg" id="logo" alt="Epiverse-TRACE"></a>
    <a class="navbar-brand me-2" href="../index.html">cleanepi</a>

    <small class="nav-text text-muted me-auto version-number" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/cleanepi.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/design_principle.html">Package Design vignette for {cleanepi}</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/epiverse-trace/cleanepi/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>cleanepi</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/epiverse-trace/cleanepi/blob/HEAD/vignettes/cleanepi.Rmd" class="external-link"><code>vignettes/cleanepi.Rmd</code></a></small>
      <div class="d-none name"><code>cleanepi.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="an-overview">An overview<a class="anchor" aria-label="anchor" href="#an-overview"></a>
</h2>
<p>No matter how many measures are taken, one must always expect messy
data from the real-world, with duplicates, errors, incomplete, or
irrelevant formats. Data cleaning is an essential step in data analysis.
It allows to produce accurate, reliable and reproducible results.
However, data cleaning is a significant barrier in data analysis because
it takes a long time to complete.</p>
<p><strong>{cleanepi}</strong> is an R package to clean, curate, and
standardize epidemiological data. It contains functions to perform
several data cleaning tasks that an end-user would anticipate to be
performed on a cluttered dataset.</p>
<p><strong>{cleanepi}</strong> is specifically designed for
epidemiological data, and works with data frame-like data structure.
This vignette provides a detailed description of the functions included
in the package and how to use them.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://epiverse-trace.github.io/cleanepi">"cleanepi"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://magrittr.tidyverse.org" class="external-link">"magrittr"</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="general-data-cleaning-tasks">General data cleaning tasks<a class="anchor" aria-label="anchor" href="#general-data-cleaning-tasks"></a>
</h2>
<p>The main function in <strong>{cleanepi}</strong> is
<code><a href="../reference/clean_data.html">clean_data()</a></code> that can perform the following tasks:</p>
<ol style="list-style-type: decimal">
<li>Scan the input data to determine the percent of missing, numeric,
character and date values in every column of the input data frame.<br>
</li>
<li>Clean up column names and convert them to more sensible formats.
This includes many sub-tasks such as changing a space, dot, or hyphen
between two words with underscore; converting camel-cases to
snake-cases; substituting foreign characters with their corresponding
English characters; and splitting a long word into multiple short words
by capital characters within, if any, and connecting them with
underscores.<br>
</li>
<li>Remove empty rows and columns.<br>
</li>
<li>Remove constant columns, i.e. columns with the same value across all
rows.<br>
</li>
<li>Replace missing entries with <code>NA</code>.</li>
<li>Checking for the uniqueness of the subject IDs.</li>
<li>Remove duplicated rows (across all columns or some specific
columns).<br>
</li>
<li>Convert <code>character</code> columns into <code>Date</code> if the
column actually contains values of type <code>Date</code> to some extent
(default is 50% of the values are <code>Date</code>).</li>
<li>Detect and remove rows with subject IDs that do not comply with the
expected format.</li>
<li>Perform dictionary-based cleaning: replace keys in specific columns
with their corresponding values stored in a data dictionary file,
replace misspelled values with their most closest values from the
dictionary.</li>
</ol>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># IMPORTING THE </span><span class="al">TEST</span><span class="co"> DATASET</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>test_data       <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="fu">system.file</span>(<span class="st">"extdata"</span>, <span class="st">"test_df.RDS"</span>,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">package =</span> <span class="st">"cleanepi"</span>))</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(test_data)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>read_input    study_id event_name country_code country_name date.of.admission dateOfBirth</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>read_input <span class="dv">1</span>   PS001P2      day <span class="dv">0</span>            <span class="dv">2</span>       Gambia        <span class="dv">01</span><span class="sc">/</span><span class="dv">12</span><span class="sc">/</span><span class="dv">2020</span>  <span class="dv">06</span><span class="sc">/</span><span class="dv">01</span><span class="sc">/</span><span class="dv">1972</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>read_input <span class="dv">2</span>   PS002P2      day <span class="dv">0</span>            <span class="dv">2</span>       Gambia        <span class="dv">28</span><span class="sc">/</span><span class="dv">01</span><span class="sc">/</span><span class="dv">2021</span>  <span class="dv">02</span><span class="sc">/</span><span class="dv">20</span><span class="sc">/</span><span class="dv">1952</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>read_input <span class="dv">3</span> PS004P2<span class="dv">-1</span>      day <span class="dv">0</span>            <span class="dv">2</span>       Gambia        <span class="dv">15</span><span class="sc">/</span><span class="dv">02</span><span class="sc">/</span><span class="dv">2021</span>  <span class="dv">06</span><span class="sc">/</span><span class="dv">15</span><span class="sc">/</span><span class="dv">1961</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>read_input <span class="dv">4</span>   PS003P2      day <span class="dv">0</span>            <span class="dv">2</span>       Gambia        <span class="dv">11</span><span class="sc">/</span><span class="dv">02</span><span class="sc">/</span><span class="dv">2021</span>  <span class="dv">11</span><span class="sc">/</span><span class="dv">11</span><span class="sc">/</span><span class="dv">1947</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>read_input <span class="dv">5</span>   P0005P2      day <span class="dv">0</span>            <span class="dv">2</span>       Gambia        <span class="dv">17</span><span class="sc">/</span><span class="dv">02</span><span class="sc">/</span><span class="dv">2021</span>  <span class="dv">09</span><span class="sc">/</span><span class="dv">26</span><span class="sc">/</span><span class="dv">2000</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>read_input <span class="dv">6</span>   PS006P2      day <span class="dv">0</span>            <span class="dv">2</span>       Gambia        <span class="dv">17</span><span class="sc">/</span><span class="dv">02</span><span class="sc">/</span><span class="dv">2021</span>         <span class="sc">-</span><span class="dv">99</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>read_input   date_first_pcr_positive_test sex</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>read_input <span class="dv">1</span>                 Dec <span class="dv">01</span>, <span class="dv">2020</span>   <span class="dv">1</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>read_input <span class="dv">2</span>                 Jan <span class="dv">01</span>, <span class="dv">2021</span>   <span class="dv">1</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>read_input <span class="dv">3</span>                 Feb <span class="dv">11</span>, <span class="dv">2021</span> <span class="sc">-</span><span class="dv">99</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>read_input <span class="dv">4</span>                 Feb <span class="dv">01</span>, <span class="dv">2021</span>   <span class="dv">1</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>read_input <span class="dv">5</span>                 Feb <span class="dv">16</span>, <span class="dv">2021</span>   <span class="dv">2</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>read_input <span class="dv">6</span>                 May <span class="dv">02</span>, <span class="dv">2021</span>   <span class="dv">2</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="co"># IMPORTING THE DATA DICTIONARY</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>test_dictionary <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="fu">system.file</span>(<span class="st">"extdata"</span>, <span class="st">"test_dictionary.RDS"</span>,</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">package =</span> <span class="st">"cleanepi"</span>))</span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># SCAN THE DATA</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>scan_result     <span class="ot">&lt;-</span> <span class="fu">scan_data</span>(test_data)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>scan_result</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>scan_data   data_type study_id event_name country_code country_name date.of.admission</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>scan_data <span class="dv">1</span>   missing        <span class="dv">0</span>          <span class="dv">0</span>            <span class="dv">0</span>            <span class="dv">0</span>                 <span class="dv">0</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>scan_data <span class="dv">2</span>   numeric        <span class="dv">0</span>          <span class="dv">0</span>            <span class="dv">1</span>            <span class="dv">0</span>                 <span class="dv">0</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>scan_data <span class="dv">3</span>      date        <span class="dv">0</span>          <span class="dv">0</span>            <span class="dv">0</span>            <span class="dv">0</span>                 <span class="dv">1</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>scan_data <span class="dv">4</span> character        <span class="dv">1</span>          <span class="dv">1</span>            <span class="dv">0</span>            <span class="dv">1</span>                 <span class="dv">0</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>scan_data <span class="dv">5</span>   logical        <span class="dv">0</span>          <span class="dv">0</span>            <span class="dv">0</span>            <span class="dv">0</span>                 <span class="dv">0</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>scan_data   dateOfBirth date_first_pcr_positive_test sex</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>scan_data <span class="dv">1</span>         <span class="fl">0.0</span>                            <span class="dv">0</span>   <span class="dv">0</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>scan_data <span class="dv">2</span>         <span class="fl">0.1</span>                            <span class="dv">0</span>   <span class="dv">1</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>scan_data <span class="dv">3</span>         <span class="fl">0.9</span>                            <span class="dv">1</span>   <span class="dv">0</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>scan_data <span class="dv">4</span>         <span class="fl">0.0</span>                            <span class="dv">0</span>   <span class="dv">0</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>scan_data <span class="dv">5</span>         <span class="fl">0.0</span>                            <span class="dv">0</span>   <span class="dv">0</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># DEFINING THE DATA CLEANING PARAMETERS</span></span>
<span><span class="va">params</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  keep                <span class="op">=</span> <span class="st">"date.of.admission"</span>,</span>
<span>  remove_duplicates   <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  target_columns      <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  replace_missing     <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  na_comes_as         <span class="op">=</span> <span class="st">"-99"</span>,</span>
<span>  check_timeframe     <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  timeframe           <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1973-05-29"</span>, <span class="st">"2023-05-29"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  error_tolerance     <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  subject_id_col_name <span class="op">=</span> <span class="st">"study_id"</span>,</span>
<span>  subject_id_format   <span class="op">=</span> <span class="st">"PS000P2"</span>,</span>
<span>  prefix              <span class="op">=</span> <span class="st">"PS"</span>,</span>
<span>  suffix              <span class="op">=</span> <span class="st">"P2"</span>,</span>
<span>  range               <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">100L</span><span class="op">)</span>,</span>
<span>  dictionary          <span class="op">=</span> <span class="va">test_dictionary</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># CLEAN THE INPUT DATA FRAME</span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/clean_data.html">clean_data</a></span><span class="op">(</span></span>
<span>  data   <span class="op">=</span> <span class="va">test_data</span>,</span>
<span>  params <span class="op">=</span> <span class="va">params</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; cleaning column names</span></span>
<span><span class="co">#&gt; replacing missing values with NA</span></span>
<span><span class="co">#&gt; removing empty rows and columns</span></span>
<span><span class="co">#&gt; removing constant columns</span></span>
<span><span class="co">#&gt; standardising date columns</span></span>
<span><span class="co">#&gt; checking for subject IDs uniqueness</span></span>
<span><span class="co">#&gt; removing duplicated rows</span></span>
<span><span class="co">#&gt; checking subject IDs format</span></span></code></pre></div>
<p>The function <code><a href="../reference/clean_data.html">clean_data()</a></code> returns a <code>list</code> of
2 objects:</p>
<ol style="list-style-type: decimal">
<li>
<strong>data</strong>: a <code>data.frame</code> or
<code>linelist</code> object with the cleaned data.</li>
<li>
<strong>report</strong>: a <code>list</code> of reports from all the
actions performed on the given dataset.</li>
</ol>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># PRINT TOP 6 ROWS OF THE CLEANED DATA</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">res</span><span class="op">[[</span><span class="st">"data"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt;   study_id date.of.admission date_of_birth date_first_pcr_positive_test    sex</span></span>
<span><span class="co">#&gt; 1  PS001P2        2020-12-01          &lt;NA&gt;                   2020-12-01   male</span></span>
<span><span class="co">#&gt; 2  PS002P2        2021-01-28          &lt;NA&gt;                   2021-01-01   male</span></span>
<span><span class="co">#&gt; 4  PS003P2        2021-02-11          &lt;NA&gt;                   2021-02-01   male</span></span>
<span><span class="co">#&gt; 6  PS006P2        2021-02-17          &lt;NA&gt;                   2021-05-02 female</span></span>
<span><span class="co">#&gt; 8  PS008P2        2021-02-22    1976-05-10                   2021-09-20 female</span></span>
<span><span class="co">#&gt; 9  PS010P2        2021-03-02    1991-09-23                   2021-02-26   male</span></span>
<span></span>
<span><span class="co"># SUMMARIZE THE REPORT OBJECT</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">res</span><span class="op">[[</span><span class="st">"report"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt;                        Length Class      Mode     </span></span>
<span><span class="co">#&gt; modified_column_names   2     data.frame list     </span></span>
<span><span class="co">#&gt; remove_constant         1     -none-     list     </span></span>
<span><span class="co">#&gt; standardize_date        2     -none-     list     </span></span>
<span><span class="co">#&gt; incorrect_subject_id    5     data.table list     </span></span>
<span><span class="co">#&gt; converted_into_numeric  1     glue       character</span></span>
<span><span class="co">#&gt; params                 14     -none-     list</span></span></code></pre></div>
<p><strong>Note:</strong> a function to visualize this report object
will be built in the next release of the package.</p>
</div>
<div class="section level2">
<h2 id="specific-data-cleaning-tasks">Specific data cleaning tasks<a class="anchor" aria-label="anchor" href="#specific-data-cleaning-tasks"></a>
</h2>
<p>Data cleaning operations such as renaming columns, removing empty
rows, columns, removing columns with a same values across all rows, and
standardization of date columns are automatically applied to the input
data. We consider them as the <code>implicit data cleaning steps</code>
and will be executed by default. However, users can call the specific
functions of these data cleaning steps separately to perform a specific
task. So as they can also call the other data cleaning functions
individually on their own.</p>
<div class="section level3">
<h3 id="standardise-columns-of-type-date">Standardise columns of type <code>Date</code><a class="anchor" aria-label="anchor" href="#standardise-columns-of-type-date"></a>
</h3>
<p>The default date format in R is <code>%Y-%m-%d</code>. However, it is
very common to encounter date values recoded differently from this.
Also, there are cases where a column in a data frame contains both
values of type <code>Date</code>, <code>character</code> or
others.<br>
The <code><a href="../reference/standardize_date.html">standardize_date()</a></code> function offers the possibility to
convert date columns into <code>%Y-%m-%d</code> format and convert
<code>character</code> columns into <code>Date</code> if the percentage
of date values reach a specified threshold. The function needs the
following arguments:</p>
<ol style="list-style-type: decimal">
<li>
<code>data</code>: the input dataset (required)<br>
</li>
<li>
<code>date_column_name</code>: a vector of the name of the column to
be converted (required)<br>
</li>
<li>
<code>format</code>: the current format of the values in that
column. Default is <code>NULL</code> (optional)</li>
<li>
<code>timeframe</code>: the expected time frame within which the
date values should fall under. Any value outside of this range will be
set to <code>NA</code>. Default is NULL (optional)</li>
<li>
<code>check_timeframe</code>: a logical that determines whether to
check if the date values are within the given time frame. Default is
<code>FALSE</code> (optional)</li>
<li>
<code>report</code>: a <code>list</code> that will contains details
about the date columns standardization process. This can be the output
<code>report object</code> from another function in
<strong>cleanepi</strong> (optional).</li>
<li>
<code>error_tolerance</code>: the minimum percentage of values of
type <code>Date</code> in a <code>character</code> column of interest
needed to convert it into a <code>Date</code> column. Default is 50%
i.e. <code>0.5</code>.</li>
</ol>
<p>⚠️ The <code>error_tolerance</code> must be used with caution. When
it is set, and the percentage of date values in a character column is
less than this threshold, the column will be returned as it is.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/standardize_date.html">standardize_date</a></span><span class="op">(</span></span>
<span>  data             <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"test_df.RDS"</span>,</span>
<span>                                         package <span class="op">=</span> <span class="st">"cleanepi"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  date_column_name <span class="op">=</span> <span class="st">"date_first_pcr_positive_test"</span>,</span>
<span>  format           <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  timeframe        <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  check_timeframe  <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  report           <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  error_tolerance  <span class="op">=</span> <span class="fl">0.5</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>This function returns a <code>list</code> of 2 elements named as:</p>
<ul>
<li>
<strong>data</strong>: the input dataset where the (specified)
columns are converted into date if the condition is met.</li>
<li>
<strong>report</strong>: a <code>list</code>, or augmented report
<code>list</code> with an element named as
<strong>standardize_date</strong> that contains a <code>vector</code> of
the transformed column names.</li>
</ul>
</div>
<div class="section level3">
<h3 id="detect-and-remove-incorrect-subject-ids">Detect and remove incorrect subject IDs<a class="anchor" aria-label="anchor" href="#detect-and-remove-incorrect-subject-ids"></a>
</h3>
<p>The <code><a href="../reference/check_subject_ids.html">check_subject_ids()</a></code> function detects and removes
rows of the input dataset where the subject ID does not match the
expected format. The function requires the following parameters:</p>
<ol style="list-style-type: decimal">
<li>
<code>data</code>: the input dataset (required)<br>
</li>
<li>
<code>id_column_name</code>: the name of the column with the subject
IDs (required)<br>
</li>
<li>
<code>format</code>: the expected subject IDs format
(required)<br>
</li>
<li>
<code>prefix</code>: the expected prefix in the subject IDs
(optional)<br>
</li>
<li>
<code>suffix</code>: the expected suffix in the subject IDs
(optional)<br>
</li>
<li>
<code>range</code>: the expected range of numbers in the subject IDs
(optional)<br>
</li>
<li>
<code>remove</code>: a Boolean variable and default is
<code>FALSE</code>. If <code>TRUE</code>, rows with incorrect subject
IDs will be removed.<br>
</li>
<li>
<code>verbose</code>: a Boolean variable and default is
<code>FALSE</code>. If <code>TRUE</code>, a message will be printed
along the execution of the function.</li>
<li>
<code>report</code>: a <code>list</code> that will contains details
about the detected wrong IDs. This can be the output
<code>report object</code> from another function in
<strong>cleanepi</strong> (optional).</li>
</ol>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># DETECT INCORRECT SUBJECT IDs</span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/check_subject_ids.html">check_subject_ids</a></span><span class="op">(</span></span>
<span>  data           <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"test_df.RDS"</span>,</span>
<span>                                       package <span class="op">=</span> <span class="st">"cleanepi"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  id_column_name <span class="op">=</span> <span class="st">"study_id"</span>,</span>
<span>  format         <span class="op">=</span> <span class="st">"PS000P2"</span>,</span>
<span>  prefix         <span class="op">=</span> <span class="st">"PS"</span>,</span>
<span>  suffix         <span class="op">=</span> <span class="st">"P2"</span>,</span>
<span>  range          <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">100L</span><span class="op">)</span>,</span>
<span>  remove         <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose        <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  report         <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Sample IDs with wrong prefix:</span></span>
<span><span class="co">#&gt; [1] "P0005P2" "PB500P2"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Sample IDs with wrong suffix:</span></span>
<span><span class="co">#&gt; [1] "PS004P2-1"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Sample IDs with wrong incorrect length:</span></span>
<span><span class="co">#&gt; [1] "PS004P2-1"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Sample IDs with wrong numbers:</span></span>
<span><span class="co">#&gt; [1] "PB500P2"</span></span></code></pre></div>
<p>This function returns a <code>list</code> of 2 elements named as:</p>
<ul>
<li>
<strong>data</strong>: the input dataset or a subset from it where
rows with bad IDs have been removed
(<code>if remove = TRUE</code>).</li>
<li>
<strong>report</strong>: a <code>list</code>, or augmented report
<code>list</code> with an element named as
<strong>incorrect_subject_id</strong> that contains a
<code>data.frame</code> of the detected rows with the incorrect subject
IDs.</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># DISPLAY ROWS WITH THE INCORRECT SUBJECT IDs</span></span>
<span><span class="va">res</span><span class="op">[[</span><span class="st">"report"</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"incorrect_subject_id"</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co">#&gt;    study_id event_name country_code country_name date.of.admission dateOfBirth</span></span>
<span><span class="co">#&gt; 5   P0005P2      day 0            2       Gambia        17/02/2021  09/26/2000</span></span>
<span><span class="co">#&gt; 7   PB500P2      day 0            2       Gambia        28/02/2021  11/03/1989</span></span>
<span><span class="co">#&gt; 3 PS004P2-1      day 0            2       Gambia        15/02/2021  06/15/1961</span></span>
<span><span class="co">#&gt;   date_first_pcr_positive_test sex</span></span>
<span><span class="co">#&gt; 5                 Feb 16, 2021   2</span></span>
<span><span class="co">#&gt; 7                 Feb 19, 2021   1</span></span>
<span><span class="co">#&gt; 3                 Feb 11, 2021 -99</span></span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># DETECT AND REMOVE INCORRECT SUBJECT IDs</span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/check_subject_ids.html">check_subject_ids</a></span><span class="op">(</span></span>
<span>  data           <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"test_df.RDS"</span>,</span>
<span>                                       package <span class="op">=</span> <span class="st">"cleanepi"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  id_column_name <span class="op">=</span> <span class="st">"study_id"</span>,</span>
<span>  format         <span class="op">=</span> <span class="st">"PS000P2"</span>,</span>
<span>  prefix         <span class="op">=</span> <span class="st">"PS"</span>,</span>
<span>  suffix         <span class="op">=</span> <span class="st">"P2"</span>,</span>
<span>  range          <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">100L</span><span class="op">)</span>,</span>
<span>  remove         <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  verbose        <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  report         <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="calculate-age">Calculate age<a class="anchor" aria-label="anchor" href="#calculate-age"></a>
</h3>
<p>The <code><a href="../reference/calculate_age.html">calculate_age()</a></code> function calculates ages of
individuals (in either years, or months, or weeks, or days) for a given
date column and reference date. It takes the following arguments:</p>
<ol style="list-style-type: decimal">
<li>
<code>data</code>: the input dataset (required)</li>
<li>
<code>date_column_name</code>: the name of the column to which the
age is calculated for (required)</li>
<li>
<code>end_date</code>: the reference date to which the age is
calculated from</li>
<li>
<code>age_in</code>: the age unit (years, months, weeks, or days)
and default is years (optional)</li>
</ol>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># CALCULATE INDIVIDUAL AGE FROM THE `dateOfBirth` COLUMN</span></span>
<span><span class="va">age</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calculate_age.html">calculate_age</a></span><span class="op">(</span></span>
<span>  data             <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"test_df.RDS"</span>,</span>
<span>                                         package <span class="op">=</span> <span class="st">"cleanepi"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  date_column_name <span class="op">=</span> <span class="st">"dateOfBirth"</span>,</span>
<span>  end_date         <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  age_in           <span class="op">=</span> <span class="st">"months"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>This function returns the input dataset with 1 or 2 extra columns
that contains, respectively: the calculated age in the specified unit
and the remaining number of days.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># DISPLAY THE OUTPUT OBJECT</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span>  <span class="co"># note the last 2 columns</span></span>
<span><span class="co">#&gt;    study_id event_name country_code country_name date.of.admission dateOfBirth</span></span>
<span><span class="co">#&gt; 1   PS001P2      day 0            2       Gambia        01/12/2020  1972-06-01</span></span>
<span><span class="co">#&gt; 2   PS002P2      day 0            2       Gambia        28/01/2021  1952-02-20</span></span>
<span><span class="co">#&gt; 3 PS004P2-1      day 0            2       Gambia        15/02/2021  1961-06-15</span></span>
<span><span class="co">#&gt; 4   PS003P2      day 0            2       Gambia        11/02/2021  1947-11-11</span></span>
<span><span class="co">#&gt; 5   P0005P2      day 0            2       Gambia        17/02/2021  2000-09-26</span></span>
<span><span class="co">#&gt; 6   PS006P2      day 0            2       Gambia        17/02/2021        &lt;NA&gt;</span></span>
<span><span class="co">#&gt;   date_first_pcr_positive_test sex age_months remainder_days</span></span>
<span><span class="co">#&gt; 1                 Dec 01, 2020   1        619             30</span></span>
<span><span class="co">#&gt; 2                 Jan 01, 2021   1        863             10</span></span>
<span><span class="co">#&gt; 3                 Feb 11, 2021 -99        751             16</span></span>
<span><span class="co">#&gt; 4                 Feb 01, 2021   1        914             20</span></span>
<span><span class="co">#&gt; 5                 Feb 16, 2021   2        280              4</span></span>
<span><span class="co">#&gt; 6                 May 02, 2021   2         NA             NA</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="check-date-sequence">Check date sequence<a class="anchor" aria-label="anchor" href="#check-date-sequence"></a>
</h3>
<p>The <code><a href="../reference/check_date_sequence.html">check_date_sequence()</a></code> function checks the order of
sequences in date event columns and makes sure that the values in all
rows in those columns comply with the desired order. For example, the
values in <code>date_of_infection</code>,
<code>date_of_admission</code>, and <code>date_of_death</code> columns
should be in the order they are listed here. Any row where the values
are not in this order will be considered as wrong and eventually be
removed by the <code><a href="../reference/check_date_sequence.html">check_date_sequence()</a></code> function. The function
takes the following arguments:</p>
<ol style="list-style-type: decimal">
<li>
<code>data</code>: the input dataset</li>
<li>
<code>event_cols</code>: a <code>vector</code> with the names of
date columns of interest. These should be listed in the expected order
of occurrence, and would look like this for the mentioned example above:
<code>event_cols = c("date_of_infection", "date_of_admission", "date_of_death"</code>
</li>
<li>
<code>remove_bad_seq</code>: a Boolean variable and the default
value is <code>false</code>. If <code>TRUE</code>, rows with incorrect
date sequence will be deleted from the output object. Otherwise, they
will be detected and stored in the report object.<br>
</li>
<li>
<code>report</code>: a <code>list</code> that will contains details
about the detected wrong date sequences. This can be the output
<code>report object</code> from another function in
<strong>cleanepi</strong>. (optional)</li>
</ol>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># DETECT ROWS WITH INCORRECT DATE SEQUENCE</span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/check_date_sequence.html">check_date_sequence</a></span><span class="op">(</span></span>
<span>  data           <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"test_df.RDS"</span>,</span>
<span>                                       package <span class="op">=</span> <span class="st">"cleanepi"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  event_cols     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"date_first_pcr_positive_test"</span>, <span class="st">"date.of.admission"</span><span class="op">)</span>,</span>
<span>  remove_bad_seq <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  report         <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The <code><a href="../reference/check_date_sequence.html">check_date_sequence()</a></code> function returns a
<code>list</code> of 2 elements:</p>
<ul>
<li>
<strong>data</strong>: the input dataset or a subset from it without
the incorrect rows (if <code>remove_bad_seq = TRUE</code>)</li>
<li>
<strong>report</strong>: a <code>list</code>, or augmented report
<code>list</code> with an element named as
<strong>incorrect_date_sequence</strong>. This in turn is a
<code>list</code> of 2 elements named as: <strong>date_sequence</strong>
(the expected order of the date events) and
<strong>bad_sequence</strong> (a <code>data.frame</code> of the rows
with the incorrect date sequences).</li>
</ul>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># PRINT ROWS WITH INCORRECT DATE SEQUENCE</span></span>
<span><span class="va">res</span><span class="op">[[</span><span class="st">"report"</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co">#&gt; $incorrect_date_sequence</span></span>
<span><span class="co">#&gt; $incorrect_date_sequence$date_sequence</span></span>
<span><span class="co">#&gt; date_first_pcr_positive_test &lt; date.of.admission</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $incorrect_date_sequence$bad_sequence</span></span>
<span><span class="co">#&gt;   study_id event_name country_code country_name date.of.admission dateOfBirth</span></span>
<span><span class="co">#&gt; 6  PS006P2      day 0            2       Gambia        2021-02-17         -99</span></span>
<span><span class="co">#&gt; 8  PS008P2      day 0            2       Gambia        2021-02-22  10/05/1976</span></span>
<span><span class="co">#&gt;   date_first_pcr_positive_test sex</span></span>
<span><span class="co">#&gt; 6                   2021-05-02   2</span></span>
<span><span class="co">#&gt; 8                   2021-09-20   2</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="find-duplicated-rows">Find duplicated rows<a class="anchor" aria-label="anchor" href="#find-duplicated-rows"></a>
</h3>
<p>The <code><a href="../reference/find_duplicates.html">find_duplicates()</a></code> function can be used to identify
duplicated rows from an input dataset. The function takes the following
arguments:</p>
<ol style="list-style-type: decimal">
<li>
<code>data</code>: the input dataset</li>
<li>
<code>target_columns</code>: a <code>vector</code> of column names
or indexes from which duplicated rows will be identified. If
<code>NULL</code>, duplicates will be detected across all columns. If
the input dataset is a <code>linelist</code> object, this can be set to
<code>tags</code> to identify duplicates across the <strong>tagged
variables</strong> only.</li>
</ol>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># IMPORT A `linelist` DATA</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"test_linelist.RDS"</span>,</span>
<span>                            package <span class="op">=</span> <span class="st">"cleanepi"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 15</span></span></span>
<span><span class="co">#&gt;   id      age age_class sex   place_infect    reporting_ctry loc_hosp dt_onset  </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> SK_1     68 60-69     M     Middle East     South Korea    Pyeongt… 2015-05-11</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> SK_2     63 60-69     F     Outside Middle… South Korea    Pyeongt… 2015-05-18</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> SK_3     76 70-79     M     Outside Middle… South Korea    Pyeongt… 2015-05-20</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> SK_4     46 40-49     F     Outside Middle… South Korea    Pyeongt… 2015-05-25</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> SK_5     50 50-59     M     Outside Middle… South Korea    365 Yeo… 2015-05-25</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> SK_6     71 70-79     M     Outside Middle… South Korea    Pyeongt… 2015-05-24</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 7 more variables: dt_report &lt;date&gt;, week_report &lt;fct&gt;, dt_start_exp &lt;date&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   dt_end_exp &lt;date&gt;, dt_diag &lt;date&gt;, outcome &lt;fct&gt;, dt_death &lt;date&gt;</span></span></span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># SHOW THE TAGGED VARIABLES</span></span>
<span><span class="fu">linelist</span><span class="fu">::</span><span class="fu"><a href="https://epiverse-trace.github.io/linelist/reference/tags.html" class="external-link">tags</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt; $date_onset</span></span>
<span><span class="co">#&gt; [1] "dt_onset"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $date_reporting</span></span>
<span><span class="co">#&gt; [1] "dt_report"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $gender</span></span>
<span><span class="co">#&gt; [1] "sex"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $outcome</span></span>
<span><span class="co">#&gt; [1] "outcome"</span></span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># FIND DUPLICATES ACROSS TAGGED VARIABLES</span></span>
<span><span class="va">dups</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/find_duplicates.html">find_duplicates</a></span><span class="op">(</span></span>
<span>  data           <span class="op">=</span> <span class="va">data</span>,</span>
<span>  target_columns <span class="op">=</span> <span class="st">"tags"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The function returns all duplicated rows in the dataset based on all
or the specified columns. Two extra columns: <code>row_id</code> and
<code>group_id</code> will be added to the dataset, to represent,
respectively, the row numbers of the duplicated rows from the input
dataset and the duplicated group ID assigned to them, every group being
the same set of values in the columns of interest.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># VISUALIZE THE DUPLICATES</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dups</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">row_id</span>, <span class="va">group_id</span>,</span>
<span>                              <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu">linelist</span><span class="fu">::</span><span class="fu"><a href="https://epiverse-trace.github.io/linelist/reference/tags.html" class="external-link">tags</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 6</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Groups:   dt_onset, dt_report, sex, outcome [3]</span></span></span>
<span><span class="co">#&gt;   row_id group_id dt_onset   dt_report  sex   outcome</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     26        1 2015-05-21 2015-06-03 M     Alive  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     33        1 2015-05-21 2015-06-03 M     Alive  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     55        2 2015-05-30 2015-06-06 M     Alive  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>     62        2 2015-05-30 2015-06-06 M     Alive  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>     23        3 2015-05-31 2015-06-02 M     Dead   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>     24        3 2015-05-31 2015-06-02 M     Dead</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="remove-duplicates">Remove duplicates<a class="anchor" aria-label="anchor" href="#remove-duplicates"></a>
</h3>
<p>To remove duplicated rows, use the <code><a href="../reference/remove_duplicates.html">remove_duplicates()</a></code>
function. It internally calls the <code><a href="../reference/find_duplicates.html">find_duplicates()</a></code>
function and it expects the following parameters:</p>
<ol style="list-style-type: decimal">
<li>
<code>data</code>: the input dataset</li>
<li>
<code>target_columns</code>: a <code>vector</code> of column names
or indexes from which duplicated rows will be identified. If
<code>NULL</code>, duplicates will be detected across all columns. f the
input dataset is a <code>linelist</code> object, this can be set to
<code>tags</code> to identify duplicates across the <strong>tagged
variables</strong> only.</li>
<li>
<code>remove</code>: a <code>numeric vector</code> of the indices of
the duplicated rows to be removed. If <code>NULL</code>, duplicates will
be removed and only the first occurrence of the duplicated rows will be
kept.</li>
<li>
<code>report</code>: a <code>list</code> that will contains details
about the duplicates removal process. This can be the output
<code>report object</code> from another function in
<strong>cleanepi</strong> (optional).</li>
</ol>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># IMPORT A `linelist` DATA</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"test_linelist.RDS"</span>,</span>
<span>                            package <span class="op">=</span> <span class="st">"cleanepi"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># REMOVE DUPLICATES ACROSS TAGGED VARIABLES (KEEP ONLY THE FIRST OCCURENCE OF</span></span>
<span><span class="co"># THE DUPLICATED ROWS)</span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/remove_duplicates.html">remove_duplicates</a></span><span class="op">(</span></span>
<span>  data           <span class="op">=</span> <span class="va">data</span>,</span>
<span>  target_columns <span class="op">=</span> <span class="st">"tags"</span>,</span>
<span>  remove         <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  report         <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The function returns the inputs dataset without the duplicated rows
and a <code>list</code> with the outcomes from the duplicates removal
operation. This is in turn a list named as remove_duplicates with 3
elements:</p>
<ul>
<li>
<strong>all_dups</strong>: this is a subset of the input dataset
with all the duplicated rows detected using the
<code><a href="../reference/find_duplicates.html">find_duplicates()</a></code> function.<br>
</li>
<li>
<strong>removed_dups</strong>: a subset of the input dataset that
was removed.</li>
<li>
<strong>duplicates_checked_from</strong>: a comma-separated string
of column names that were used to identify the duplicated rows.</li>
</ul>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># STORE THE DUPLICATES REMOVAL PROCESS REPORT IN A VARIABLE</span></span>
<span><span class="va">dups_removal_report</span> <span class="op">&lt;-</span> <span class="va">res</span><span class="op">[[</span><span class="st">"report"</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"remove_duplicates"</span><span class="op">]</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># DISPLAY ALL DUPLICATES FOUND</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dups_removal_report</span><span class="op">[[</span><span class="st">"all_dups"</span><span class="op">]</span><span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>       <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">row_id</span>, <span class="va">group_id</span>, <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu">linelist</span><span class="fu">::</span><span class="fu"><a href="https://epiverse-trace.github.io/linelist/reference/tags.html" class="external-link">tags</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 6</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Groups:   dt_onset, dt_report, sex, outcome [3]</span></span></span>
<span><span class="co">#&gt;   row_id group_id dt_onset   dt_report  sex   outcome</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     26        1 2015-05-21 2015-06-03 M     Alive  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     33        1 2015-05-21 2015-06-03 M     Alive  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     55        2 2015-05-30 2015-06-06 M     Alive  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>     62        2 2015-05-30 2015-06-06 M     Alive  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>     23        3 2015-05-31 2015-06-02 M     Dead   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>     24        3 2015-05-31 2015-06-02 M     Dead</span></span>
<span></span>
<span><span class="co"># DISPLAY THE DUPLICATED LINES THAT WAS REMOVED</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dups_removal_report</span><span class="op">[[</span><span class="st">"removed_dups"</span><span class="op">]</span><span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>       <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">row_id</span>, <span class="va">group_id</span>, <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu">linelist</span><span class="fu">::</span><span class="fu"><a href="https://epiverse-trace.github.io/linelist/reference/tags.html" class="external-link">tags</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 6</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Groups:   dt_onset, dt_report, sex, outcome [6]</span></span></span>
<span><span class="co">#&gt;   row_id group_id dt_onset   dt_report  sex   outcome</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     33        1 2015-05-21 2015-06-03 M     Alive  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     62        2 2015-05-30 2015-06-06 M     Alive  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     24        3 2015-05-31 2015-06-02 M     Dead   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>    105        4 2015-05-31 2015-06-09 M     Alive  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>     31        5 2015-06-01 2015-06-03 M     Alive  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>     60        6 2015-06-01 2015-06-06 F     Alive</span></span>
<span></span>
<span><span class="co"># DISPLAY COLUMN NAMES USED TO DETECT DUPLICATES</span></span>
<span><span class="va">dups_removal_report</span><span class="op">[[</span><span class="st">"duplicates_checked_from"</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co">#&gt; dt_onset, dt_report, sex, outcome</span></span></code></pre></div>
<p>The output from <code><a href="../reference/find_duplicates.html">find_duplicates()</a></code> function can also be
passed to <code><a href="../reference/remove_duplicates.html">remove_duplicates()</a></code> function to specify which
duplicated rows to be removed.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># DETECT DUPLICATES FROM TAGGED COLUMNS</span></span>
<span><span class="va">dups</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/find_duplicates.html">find_duplicates</a></span><span class="op">(</span></span>
<span>  data           <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"test_linelist.RDS"</span>,</span>
<span>                                       package <span class="op">=</span> <span class="st">"cleanepi"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  target_columns <span class="op">=</span> <span class="st">"tags"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># REMOVE FIRST OCCURRENCE OF DUPLICATED ROWS</span></span>
<span><span class="va">dups_index_to_remove</span> <span class="op">&lt;-</span> <span class="va">dups</span><span class="op">[[</span><span class="st">"row_id"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">dups</span><span class="op">)</span>, <span class="fl">2L</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">no_dups</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/remove_duplicates.html">remove_duplicates</a></span><span class="op">(</span></span>
<span>  data           <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"test_linelist.RDS"</span>,</span>
<span>                                       package <span class="op">=</span> <span class="st">"cleanepi"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  target_columns <span class="op">=</span> <span class="st">"tags"</span>,</span>
<span>  remove         <span class="op">=</span> <span class="va">dups_index_to_remove</span>,</span>
<span>  report         <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="clean-data-based-on-dictionary">Clean data based on dictionary<a class="anchor" aria-label="anchor" href="#clean-data-based-on-dictionary"></a>
</h3>
<p>Some columns in a data frame or linelist contain values that
represents the different options proposed to the study participants. The
complete labels for those options are generally stored in so called data
dictionary file. Note that such dictionary files usually contain other
information needed for the understanding of the input dataset.</p>
<p>The <code><a href="../reference/clean_using_dictionary.html">clean_using_dictionary()</a></code> function can be used to
replace the options with their corresponding values that are stored in
the data dictionary. It takes the input data frame and its correspondent
dictionary as inputs. The structure of this data dictionary should be
the same as expected by the <a href="https://www.repidemicsconsortium.org/matchmaker/" class="external-link">matchmaker</a>
package. Note that any dictionary that is fit for {matchmaker} is for
<code><a href="../reference/clean_using_dictionary.html">clean_using_dictionary()</a></code> as it makes call of functions from
this package.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>test_dictionary</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>display_dictionary   options values grp orders</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>display_dictionary <span class="dv">1</span>       <span class="dv">1</span>   male sex      <span class="dv">1</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>display_dictionary <span class="dv">2</span>       <span class="dv">2</span> female sex      <span class="dv">2</span></span></code></pre></div>
<p>It is common to have some options in the input data that are not
defined in the dictionary. Use the <code><a href="../reference/add_to_dictionnary.html">add_to_dictionnary()</a></code>
function to define them in the data dictionary. In the example below,
<code>-99</code> is not defined in the data dictionary ABOVE.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## READING IN THE DATA</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"test_df.RDS"</span>,</span>
<span>                            package <span class="op">=</span> <span class="st">"cleanepi"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## ADD THE EXTRA OPTION TO THE DICTIONARY</span></span>
<span><span class="va">test_dictionary</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_to_dictionnary.html">add_to_dictionnary</a></span><span class="op">(</span><span class="va">test_dictionary</span>,</span>
<span>                                      option <span class="op">=</span> <span class="st">"-99"</span>,</span>
<span>                                      value  <span class="op">=</span> <span class="st">"unknow"</span>,</span>
<span>                                      grp    <span class="op">=</span> <span class="st">"sex"</span>,</span>
<span>                                      order  <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="va">test_dictionary</span></span>
<span><span class="co">#&gt;   options values grp orders</span></span>
<span><span class="co">#&gt; 1       1   male sex      1</span></span>
<span><span class="co">#&gt; 2       2 female sex      2</span></span>
<span><span class="co">#&gt; 3     -99 unknow sex      3</span></span></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>cleaned_df <span class="ot">&lt;-</span> <span class="fu">clean_using_dictionary</span>(</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data       =</span> data,</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">dictionary =</span> test_dictionary</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>cleaned_df</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>dictionary<span class="sc">-</span>base_cleaning     study_id event_name country_code country_name date.of.admission dateOfBirth</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>dictionary<span class="sc">-</span>base_cleaning <span class="dv">1</span>    PS001P2      day <span class="dv">0</span>            <span class="dv">2</span>       Gambia        <span class="dv">01</span><span class="sc">/</span><span class="dv">12</span><span class="sc">/</span><span class="dv">2020</span>  <span class="dv">06</span><span class="sc">/</span><span class="dv">01</span><span class="sc">/</span><span class="dv">1972</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>dictionary<span class="sc">-</span>base_cleaning <span class="dv">2</span>    PS002P2      day <span class="dv">0</span>            <span class="dv">2</span>       Gambia        <span class="dv">28</span><span class="sc">/</span><span class="dv">01</span><span class="sc">/</span><span class="dv">2021</span>  <span class="dv">02</span><span class="sc">/</span><span class="dv">20</span><span class="sc">/</span><span class="dv">1952</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>dictionary<span class="sc">-</span>base_cleaning <span class="dv">3</span>  PS004P2<span class="dv">-1</span>      day <span class="dv">0</span>            <span class="dv">2</span>       Gambia        <span class="dv">15</span><span class="sc">/</span><span class="dv">02</span><span class="sc">/</span><span class="dv">2021</span>  <span class="dv">06</span><span class="sc">/</span><span class="dv">15</span><span class="sc">/</span><span class="dv">1961</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>dictionary<span class="sc">-</span>base_cleaning <span class="dv">4</span>    PS003P2      day <span class="dv">0</span>            <span class="dv">2</span>       Gambia        <span class="dv">11</span><span class="sc">/</span><span class="dv">02</span><span class="sc">/</span><span class="dv">2021</span>  <span class="dv">11</span><span class="sc">/</span><span class="dv">11</span><span class="sc">/</span><span class="dv">1947</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>dictionary<span class="sc">-</span>base_cleaning <span class="dv">5</span>    P0005P2      day <span class="dv">0</span>            <span class="dv">2</span>       Gambia        <span class="dv">17</span><span class="sc">/</span><span class="dv">02</span><span class="sc">/</span><span class="dv">2021</span>  <span class="dv">09</span><span class="sc">/</span><span class="dv">26</span><span class="sc">/</span><span class="dv">2000</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>dictionary<span class="sc">-</span>base_cleaning <span class="dv">6</span>    PS006P2      day <span class="dv">0</span>            <span class="dv">2</span>       Gambia        <span class="dv">17</span><span class="sc">/</span><span class="dv">02</span><span class="sc">/</span><span class="dv">2021</span>         <span class="sc">-</span><span class="dv">99</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>dictionary<span class="sc">-</span>base_cleaning <span class="dv">7</span>    PB500P2      day <span class="dv">0</span>            <span class="dv">2</span>       Gambia        <span class="dv">28</span><span class="sc">/</span><span class="dv">02</span><span class="sc">/</span><span class="dv">2021</span>  <span class="dv">11</span><span class="sc">/</span><span class="dv">03</span><span class="sc">/</span><span class="dv">1989</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>dictionary<span class="sc">-</span>base_cleaning <span class="dv">8</span>    PS008P2      day <span class="dv">0</span>            <span class="dv">2</span>       Gambia        <span class="dv">22</span><span class="sc">/</span><span class="dv">02</span><span class="sc">/</span><span class="dv">2021</span>  <span class="dv">10</span><span class="sc">/</span><span class="dv">05</span><span class="sc">/</span><span class="dv">1976</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>dictionary<span class="sc">-</span>base_cleaning <span class="dv">9</span>    PS010P2      day <span class="dv">0</span>            <span class="dv">2</span>       Gambia        <span class="dv">02</span><span class="sc">/</span><span class="dv">03</span><span class="sc">/</span><span class="dv">2021</span>  <span class="dv">09</span><span class="sc">/</span><span class="dv">23</span><span class="sc">/</span><span class="dv">1991</span></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>dictionary<span class="sc">-</span>base_cleaning <span class="dv">10</span>   PS011P2      day <span class="dv">0</span>            <span class="dv">2</span>       Gambia        <span class="dv">05</span><span class="sc">/</span><span class="dv">03</span><span class="sc">/</span><span class="dv">2021</span>  <span class="dv">02</span><span class="sc">/</span><span class="dv">08</span><span class="sc">/</span><span class="dv">1991</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>dictionary<span class="sc">-</span>base_cleaning    date_first_pcr_positive_test    sex</span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>dictionary<span class="sc">-</span>base_cleaning <span class="dv">1</span>                  Dec <span class="dv">01</span>, <span class="dv">2020</span>   male</span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>dictionary<span class="sc">-</span>base_cleaning <span class="dv">2</span>                  Jan <span class="dv">01</span>, <span class="dv">2021</span>   male</span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>dictionary<span class="sc">-</span>base_cleaning <span class="dv">3</span>                  Feb <span class="dv">11</span>, <span class="dv">2021</span> unknow</span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>dictionary<span class="sc">-</span>base_cleaning <span class="dv">4</span>                  Feb <span class="dv">01</span>, <span class="dv">2021</span>   male</span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a>dictionary<span class="sc">-</span>base_cleaning <span class="dv">5</span>                  Feb <span class="dv">16</span>, <span class="dv">2021</span> female</span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>dictionary<span class="sc">-</span>base_cleaning <span class="dv">6</span>                  May <span class="dv">02</span>, <span class="dv">2021</span> female</span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a>dictionary<span class="sc">-</span>base_cleaning <span class="dv">7</span>                  Feb <span class="dv">19</span>, <span class="dv">2021</span>   male</span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a>dictionary<span class="sc">-</span>base_cleaning <span class="dv">8</span>                  Sep <span class="dv">20</span>, <span class="dv">2021</span> female</span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a>dictionary<span class="sc">-</span>base_cleaning <span class="dv">9</span>                  Feb <span class="dv">26</span>, <span class="dv">2021</span>   male</span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a>dictionary<span class="sc">-</span>base_cleaning <span class="dv">10</span>                 Mar <span class="dv">03</span>, <span class="dv">2021</span> female</span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Karim Mané.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
